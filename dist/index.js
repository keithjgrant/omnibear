(function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=37)})([function(e,t,n){(function(e){function t(e,t){var n,o,r,i,a;for(a=arguments.length;a-- >2;)S.push(arguments[a]);for(t&&t.children&&(S.length||S.push(t.children),delete t.children);S.length;)if((r=S.pop())instanceof Array)for(a=r.length;a--;)S.push(r[a]);else null!=r&&!0!==r&&!1!==r&&("number"==typeof r&&(r=String(r)),(i="string"==typeof r)&&o?n[n.length-1]+=r:((n||(n=[])).push(r),o=i));var s=new function(e,t,n){this.nodeName=e,this.attributes=t,this.children=n,this.key=t&&t.key}(e,t||void 0,n||C);return j.vnode&&j.vnode(s),s}function n(e,t){if(t)for(var n in t)e[n]=t[n];return e}function o(e){return n({},e)}function r(e){return"function"==typeof e}function i(e){return"string"==typeof e}function a(e){!e._dirty&&(e._dirty=!0)&&1==D.push(e)&&(j.debounceRendering||A)(s)}function s(){var e,t=D;for(D=[];e=t.pop();)e._dirty&&O(e)}function u(e){var t=e&&e.nodeName;return t&&r(t)&&!(t.prototype&&t.prototype.render)}function c(e,t){return e.nodeName(p(e),t||N)}function l(e,t){return e.normalizedNodeName===t||T(e.nodeName)===T(t)}function p(e){var t=o(e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function f(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,t,n,o,a){if("className"===t&&(t="class"),"class"===t&&o&&"object"==typeof o&&(o=function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(o)),"key"===t);else if("class"!==t||a)if("style"===t){if((!o||i(o)||i(n))&&(e.style.cssText=o||""),o&&"object"==typeof o){if(!i(n))for(var s in n)s in o||(e.style[s]="");for(var s in o)e.style[s]="number"!=typeof o[s]||R[s]?o[s]:o[s]+"px"}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var u=e._listeners||(e._listeners={});t=T(t.substring(2)),o?u[t]||e.addEventListener(t,h,!!L[t]):u[t]&&e.removeEventListener(t,h,!!L[t]),u[t]=o}else if("list"!==t&&"type"!==t&&!a&&t in e)(function(e,t,n){try{e[t]=n}catch(e){}})(e,t,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(t);else{var c=a&&t.match(/^xlink\:?(.+)/);null==o||!1===o?c?e.removeAttributeNS("http://www.w3.org/1999/xlink",T(c[1])):e.removeAttribute(t):"object"==typeof o||r(o)||(c?e.setAttributeNS("http://www.w3.org/1999/xlink",T(c[1]),o):e.setAttribute(t,o))}else e.className=o||""}function h(e){return this._listeners[e.type](j.event&&j.event(e)||e)}function y(e,t){var n=T(e),o=U[n]&&U[n].pop()||(t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e));return o.normalizedNodeName=n,o}function b(){for(var e;e=I.pop();)j.afterMount&&j.afterMount(e),e.componentDidMount&&e.componentDidMount()}function g(e,t,n,o,r,i){F++||(q=r&&void 0!==r.ownerSVGElement,B=e&&!(M in e));var a=m(e,t,n,o);return r&&a.parentNode!==r&&r.appendChild(a),--F||(B=!1,i||b()),a}function m(e,t,n,o){for(var a=t&&t.attributes&&t.attributes.ref;u(t);)t=c(t,n);if(null==t&&(t=""),i(t))return e&&e instanceof Text&&e.parentNode?e.nodeValue!=t&&(e.nodeValue=t):(e&&v(e),e=document.createTextNode(t)),e;if(r(t.nodeName))return function(e,t,n,o){var r=e&&e._component,i=r,a=e,s=r&&e._componentConstructor===t.nodeName,u=s,c=p(t);for(;r&&!u&&(r=r._parentComponent);)u=r.constructor===t.nodeName;r&&u&&(!o||r._component)?(w(r,c,3,n,o),e=r.base):(i&&!s&&(E(i,!0),e=a=null),r=_(t.nodeName,c,n),e&&!r.nextBase&&(r.nextBase=e,a=null),w(r,c,1,n,o),e=r.base,a&&e!==a&&(a._component=null,v(a)));return e}(e,t,n,o);var s=e,h=String(t.nodeName),b=q,g=t.children;if(q="svg"===h||"foreignObject"!==h&&q,e){if(!l(e,h)){for(s=y(h,q);e.firstChild;)s.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(s,e),v(e)}}else s=y(h,q);var O=s.firstChild,k=s[M];if(!k){s[M]=k={};for(var j=s.attributes,S=j.length;S--;)k[j[S].name]=j[S].value}return!B&&g&&1===g.length&&"string"==typeof g[0]&&O&&O instanceof Text&&!O.nextSibling?O.nodeValue!=g[0]&&(O.nodeValue=g[0]):(g&&g.length||O)&&function(e,t,n,o,a){var s,c,p,d,h=e.childNodes,y=[],b={},g=0,_=0,w=h.length,O=0,E=t&&t.length;if(w)for(var k=0;k<w;k++){var j=h[k],S=j[M],C=E?(c=j._component)?c.__key:S?S.key:null:null;null!=C?(g++,b[C]=j):(B||a||S||j instanceof Text)&&(y[O++]=j)}if(E)for(var k=0;k<E;k++){p=t[k],d=null;var C=p.key;if(null!=C)g&&C in b&&(d=b[C],b[C]=void 0,g--);else if(!d&&_<O)for(s=_;s<O;s++)if((c=y[s])&&(P=c,i(T=p)?P instanceof Text:i(T.nodeName)?!P._componentConstructor&&l(P,T.nodeName):r(T.nodeName)?!P._componentConstructor||P._componentConstructor===T.nodeName||u(T):void 0)){d=c,y[s]=void 0,s===O-1&&O--,s===_&&_++;break}(d=m(d,p,n,o))&&d!==e&&(k>=w?e.appendChild(d):d!==h[k]&&(d===h[k+1]&&f(h[k]),e.insertBefore(d,h[k]||null)))}var P,T;if(g)for(var k in b)b[k]&&v(b[k]);for(;_<=O;)(d=y[O--])&&v(d)}(s,g,n,o,!!k.dangerouslySetInnerHTML),function(e,t,n){var o;for(o in n)t&&o in t||null==n[o]||d(e,o,n[o],n[o]=void 0,q);if(t)for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||d(e,o,n[o],n[o]=t[o],q)}(s,t.attributes,k),a&&(k.ref=a)(s),q=b,s}function v(e,t){var n,o=e._component;if(o)E(o,!t);else for(e[M]&&e[M].ref&&e[M].ref(null),t||function(e){if(f(e),e instanceof Element){e._component=e._componentConstructor=null;var t=e.normalizedNodeName||T(e.nodeName);(U[t]||(U[t]=[])).push(e)}}(e);n=e.lastChild;)v(n,t)}function _(e,t,n){var o=new e(t,n),r=z[e.name];if(k.call(o,t,n),r)for(var i=r.length;i--;)if(r[i].constructor===e){o.nextBase=r[i].nextBase,r.splice(i,1);break}return o}function w(e,t,n,o,r){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o),o&&o!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===j.syncComponentUpdates&&e.base?a(e):O(e,1,r)),e.__ref&&e.__ref(e))}function O(e,t,i,a){if(!e._disable){var s,l,f,d,h=e.props,y=e.state,m=e.context,k=e.prevProps||h,S=e.prevState||y,C=e.prevContext||m,P=e.base,T=e.nextBase,x=P||T,A=e._component;if(P&&(e.props=k,e.state=S,e.context=C,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(h,y,m)?s=!0:e.componentWillUpdate&&e.componentWillUpdate(h,y,m),e.props=h,e.state=y,e.context=m),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!s){for(e.render&&(l=e.render(h,y,m)),e.getChildContext&&(m=n(o(m),e.getChildContext()));u(l);)l=c(l,m);var N,M,R=l&&l.nodeName;if(r(R)){var L=p(l);(f=A)&&f.constructor===R&&L.key==f.__key?w(f,L,1,m):(N=f,(f=_(R,L,m)).nextBase=f.nextBase||T,f._parentComponent=e,e._component=f,w(f,L,0,m),O(f,1,i,!0)),M=f.base}else d=x,(N=A)&&(d=e._component=null),(x||1===t)&&(d&&(d._component=null),M=g(d,l,m,i||!P,x&&x.parentNode,!0));if(x&&M!==x&&f!==A){var D=x.parentNode;D&&M!==D&&(D.replaceChild(M,x),N||(x._component=null,v(x)))}if(N&&E(N,M!==x),e.base=M,M&&!a){for(var U=e,q=e;q=q._parentComponent;)(U=q).base=M;M._component=U,M._componentConstructor=U.constructor}}!P||i?I.unshift(e):s||(e.componentDidUpdate&&e.componentDidUpdate(k,S,C),j.afterUpdate&&j.afterUpdate(e));var B,z=e._renderCallbacks;if(z)for(;B=z.pop();)B.call(e);F||a||b()}}function E(e,t){j.beforeUnmount&&j.beforeUnmount(e);var n=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var o=e._component;if(o)E(o,t);else if(n){var r;for(n[M]&&n[M].ref&&n[M].ref(null),e.nextBase=n,t&&(f(n),function(e){var t=e.constructor.name,n=z[t];n?n.push(e):z[t]=[e]}(e));r=n.lastChild;)v(r,!t)}e.__ref&&e.__ref(null),e.componentDidUnmount&&e.componentDidUnmount()}function k(e,t){this._dirty=!0,this.context=t,this.props=e,this.state||(this.state={})}var j={},S=[],C=[],P={},T=function(e){return P[e]||(P[e]=e.toLowerCase())},x="undefined"!=typeof Promise&&Promise.resolve(),A=x?function(e){x.then(e)}:setTimeout,N={},M="undefined"!=typeof Symbol?Symbol.for("preactattr"):"__preactattr_",R={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},L={blur:1,error:1,focus:1,load:1,resize:1,scroll:1},D=[],U={},I=[],F=0,q=!1,B=!1,z={};n(k.prototype,{linkState:function(e,t){var n=this._linkedStates||(this._linkedStates={});return n[e+t]||(n[e+t]=function(e,t,n){var o=t.split(".");return function(t){for(var r=t&&t.target||this,a={},s=a,u=i(n)?function(e,t){for(var n=t.split("."),o=0;o<n.length&&e;o++)e=e[n[o]];return e}(t,n):r.nodeName?r.type.match(/^che|rad/)?r.checked:r.value:t,c=0;c<o.length-1;c++)s=s[o[c]]||(s[o[c]]=!c&&e.state[o[c]]||{});s[o[c]]=u,e.setState(a)}}(this,e,t))},setState:function(e,t){var i=this.state;this.prevState||(this.prevState=o(i)),n(i,r(e)?e(i,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),a(this)},forceUpdate:function(){O(this,2)},render:function(){}}),e.h=t,e.cloneElement=function(e,r){return t(e.nodeName,n(o(e.attributes),r),arguments.length>2?[].slice.call(arguments,2):e.children)},e.Component=k,e.render=function(e,t,n){return g(n,e,{},!1,t)},e.rerender=s,e.options=j})(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openLink=function(e){e.preventDefault(),e.target.href&&chrome.tabs.create({url:e.target.href})},t.clone=function(e){return JSON.parse(JSON.stringify(e))},t.getAuthTab=function(){return new Promise(function(e,t){chrome.tabs.query({url:"https://omnibear.com/auth/success*"},function(n){n.length?e(n[0]):t("Auth tab not found")})})},t.logout=function(){["token","domain","authEndpoint","tokenEndpoint","micropubEndpoint"].map(function(e){return localStorage.removeItem(e)})},t.generateSlug=function(e){var t=e.toLocaleLowerCase().trim();t=t.replace(/\s/g,"-");for(var n=0,a=r.length;n<a;n++)t=t.replace(new RegExp(r.charAt(n),"g"),i.charAt(n));return(t=(t=t.replace(o,"")).replace(/\-\-+/g,"-")).split("-").splice(0,6).join("-")},t.getPageUrl=function(){return new Promise(function(e,t){var n=localStorage.getItem("pageTabId");chrome.tabs.get(Number(n),function(t){e(t.url)})})};var o=/[^A-Za-z0-9\-]/g,r="Ã¡Ã¤Ã¢Ã Ã£Ã¥ÄÃ§Ä‡ÄÃ©Ä›Ã«Ã¨Ãªáº½Ä•È‡Ä™Ä—Ã­Ã¬Ã®Ã¯ÅˆÃ±Ã³Ã¶Ã²Ã´ÃµÃ¸Ã°Å™Å•Å¡Å¥ÃºÅ¯Ã¼Ã¹Ã»Ã½Ã¿Å¾Ã¾ÃžÄÄ‘ÃŸÃ†aÂ·/_,:;",i="aaaaaacccdeeeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NEW_NOTE="new-note",t.PAGE_REPLY="page-reply",t.ITEM_REPLY="item-reply",t.MESSAGE_SUCCESS="success",t.MESSAGE_ERROR="error",t.DEFAULT_REACJI=["ðŸ‘","ðŸ‘Ž","ðŸŽ‰","ðŸ˜†","ðŸ˜¢","ðŸ˜ "]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(11),i=(o=r)&&o.__esModule?o:{default:o};t.default=new i.default({clientId:"https://omnibear.com",redirectUri:"https://omnibear.com/auth/success/",state:"very-secret-omnibear-state",me:localStorage.getItem("domain"),authEndpoint:localStorage.getItem("authEndpoint"),tokenEndpoint:localStorage.getItem("tokenEndpoint"),micropubEndpoint:localStorage.getItem("micropubEndpoint"),token:localStorage.getItem("token")})},function(e,t,n){"use strict";var o=String.prototype.replace,r=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return o.call(e,r,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,n){"use strict";var o=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},o=0;o<e.length;++o)void 0!==e[o]&&(n[o]=e[o]);return n},t.merge=function(e,n,r){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(r.plainObjects||r.allowPrototypes||!o.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var i=e;return Array.isArray(e)&&!Array.isArray(n)&&(i=t.arrayToObject(e,r)),Array.isArray(e)&&Array.isArray(n)?(n.forEach(function(n,i){o.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t.merge(e[i],n,r):e.push(n):e[i]=n}),e):Object.keys(n).reduce(function(e,i){var a=n[i];return o.call(e,i)?e[i]=t.merge(e[i],a,r):e[i]=a,e},i)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",o=0;o<t.length;++o){var i=t.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?n+=t.charAt(o):i<128?n+=r[i]:i<2048?n+=r[192|i>>6]+r[128|63&i]:i<55296||i>=57344?n+=r[224|i>>12]+r[128|i>>6&63]+r[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),n+=r[240|i>>18]+r[128|i>>12&63]+r[128|i>>6&63]+r[128|63&i])}return n},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],o=0;o<t.length;++o)for(var r=t[o],i=r.obj[r.prop],a=Object.keys(i),s=0;s<a.length;++s){var u=a[s],c=i[u];"object"==typeof c&&null!==c&&-1===n.indexOf(c)&&(t.push({obj:i,prop:u}),n.push(c))}return function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var o=[],r=0;r<t.length;++r)void 0!==t[r]&&o.push(t[r]);n.obj[n.prop]=o}}return t}(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),i=n(2);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){return(0,r.h)("div",{className:this.getClass()},this.props.children,this.props.location?(0,r.h)("span",null,":",(0,r.h)("br",null),(0,r.h)("a",{href:this.props.location},this.props.location)):null)}},{key:"getClass",value:function(){var e,t=(a(e={},i.MESSAGE_INFO,"message message--info"),a(e,i.MESSAGE_SUCCESS,"message message--success"),a(e,i.MESSAGE_ERROR,"message message--danger"),e);return t[this.props.type]||t[i.MESSAGE_INFO]}}]),t}();t.default=s},function(e,t,n){"use strict";var o=n(12);n.n(o);n.o(o,"parse")&&n.d(t,"a",function(){return o.parse}),n.o(o,"stringify")&&n.d(t,"c",function(){return o.stringify});var r=n(10);n.d(t,"b",function(){return r.a});var i=n(9);n.d(t,"d",function(){return i.a});var a=n(8);n.d(t,"e",function(){return a.a})},function(e,t,n){"use strict";t.a=function(e,t){const n=-1==e.indexOf("?")?"?":"&";let o=[];for(var r in t)Array.isArray(t[r])?t[r].forEach(e=>{o.push(r+"[]="+encodeURIComponent(e))}):o.push(r+"="+encodeURIComponent(t[r]));const i=o.join("&");return e+n+i}},function(e,t,n){"use strict";t.a=function e(t,n=new FormData,o=!1){Object.keys(t).forEach(r=>{const i=t[r];o&&(r=o+"["+r+"]"),Array.isArray(i)?i.forEach(t=>{const o={};o[r+"[]"]=t,n=e(o,n)}):n.append(r,i)});return n}},function(e,t,n){"use strict";t.a=function(e,t){let n={},o=t;const r=(new DOMParser).parseFromString(e,"text/html"),i=r.querySelector("base[href]"),a=r.querySelectorAll("[rel][href]");if(i){const e=i.getAttribute("href"),n=new URL(e,t);o=n.toString()}return a.length&&a.forEach(e=>{const t=e.getAttribute("rel").toLowerCase().split("\\s+"),r=e.getAttribute("href");t.length&&null!==r&&t.forEach(e=>{n[e]||(n[e]=[]);const t=new URL(r,o).toString();-1===n[e].indexOf(t)&&n[e].push(t)})}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var o=n(7);const r=o.a,i=o.b,a=o.c,s=o.d,u=o.e;o.FormData&&!e.FormData&&(e.FormData=o.FormData),o.DOMParser&&!e.DOMParser&&(e.DOMParser=o.DOMParser),o.URL&&!e.URL&&(e.URL=o.URL);const c={me:"",scope:"post create delete update",token:"",authEndpoint:"",tokenEndpoint:"",micropubEndpoint:""},l=(e,t=null,n=null)=>({message:e,status:t,error:n});t.default=class{constructor(e={}){this.options=Object.assign({},c,e),this.create=this.create.bind(this),this.update=this.update.bind(this),this.delete=this.delete.bind(this),this.undelete=this.undelete.bind(this),this.postMicropub=this.postMicropub.bind(this),this.checkRequiredOptions=this.checkRequiredOptions.bind(this),this.getAuthUrl=this.getAuthUrl.bind(this),this.getEndpointsFromUrl=this.getEndpointsFromUrl.bind(this)}checkRequiredOptions(e){let t=[],n=!0;for(var o=0;o<e.length;o++){const r=e[o];this.options[r]||(n=!1,t.push(r))}return{pass:n,missing:t}}getEndpointsFromUrl(e){return new Promise((t,n)=>{let o={micropub:null,authorization_endpoint:null,token_endpoint:null},r=e;fetch(e).then(t=>{if(!t.ok)return n(l("Error getting page",t.status));r=t.url;const i=t.headers.get("link");return i&&i.split(",").forEach(t=>{Object.keys(o).forEach(n=>{const r=t.match(/rel=("([^"]*)"|([^,"<]+))/);if(r&&r[1]&&(" "+r[1].toLowerCase()+" ").indexOf(" "+n+" ")>=0){const r=t.match(/[^<>|\s]+/g);if(r&&r[0]){let t=r[0];t=new URL(t,e).toString(),o[n]=t}}})}),t.text()}).then(a=>{const s=i(a,r);return this.options.me=e,s&&Object.keys(o).forEach(e=>{s[e]&&s[e][0]&&(o[e]=s[e][0])}),o.micropub&&o.authorization_endpoint&&o.token_endpoint?(this.options.micropubEndpoint=o.micropub,this.options.tokenEndpoint=o.token_endpoint,this.options.authEndpoint=o.authorization_endpoint,t({auth:this.options.authEndpoint,token:this.options.tokenEndpoint,micropub:this.options.micropubEndpoint})):n(l("Error getting microformats data"))}).catch(e=>n(l("Error fetching url",null,e)))})}getToken(e){return new Promise((t,n)=>{const o=this.checkRequiredOptions(["me","clientId","redirectUri","tokenEndpoint"]);if(!o.pass)return n(l("Missing required options: "+o.missing.join(", ")));const i={grant_type:"authorization_code",me:this.options.me,code:e,client_id:this.options.clientId,redirect_uri:this.options.redirectUri},s={method:"POST",body:a(i),headers:new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",Accept:"application/json, application/x-www-form-urlencoded"})};fetch(this.options.tokenEndpoint,s).then(e=>{if(!e.ok)return n(l("Error getting token",e.status));const t=e.headers.get("Content-Type");return t&&0===t.indexOf("application/json")?e.json():e.text()}).then(e=>("string"==typeof e&&(e=r(e)),e.error_description?n(l(e.error_description)):e.error?n(l(e.error)):e.me&&e.scope&&e.access_token?e.me&&e.me.replace(/\/+$/,"")!==this.options.me.replace(/\/+$/,"")?n(l("The me values did not match")):(this.options.token=e.access_token,void t(e.access_token)):n(l("The token endpoint did not return the expected parameters")))).catch(e=>n(l("Error requesting token endpoint",null,e)))})}getAuthUrl(){return new Promise((e,t)=>{let n=this.checkRequiredOptions(["me","state"]);if(!n.pass)return t(l("Missing required options: "+n.missing.join(", ")));this.getEndpointsFromUrl(this.options.me).then(()=>{let n=this.checkRequiredOptions(["me","state","scope","clientId","redirectUri"]);if(!n.pass)return t(l("Missing required options: "+n.missing.join(", ")));const o={me:this.options.me,client_id:this.options.clientId,redirect_uri:this.options.redirectUri,response_type:"code",scope:this.options.scope,state:this.options.state};e(this.options.authEndpoint+"?"+a(o))}).catch(e=>t(l("Error getting auth url",null,e)))})}verifyToken(){return new Promise((e,t)=>{const n=this.checkRequiredOptions(["token","micropubEndpoint"]);if(!n.pass)return t(l("Missing required options: "+n.missing.join(", ")));const o={method:"GET",headers:new Headers({Authorization:"Bearer "+this.options.token})};fetch(this.options.micropubEndpoint,o).then(n=>n.ok?e(!0):t(l("Error verifying token",n.status))).catch(e=>t(l("Error verifying token",null,e)))})}create(e,t="json"){return this.postMicropub(e,t)}update(e,t){return this.postMicropub(Object.assign({action:"update",url:e},t))}delete(e){return this.postMicropub({action:"delete",url:e})}undelete(e){return this.postMicropub({action:"undelete",url:e})}postMicropub(e,t="json"){return new Promise((n,o)=>{const i=this.checkRequiredOptions(["token","micropubEndpoint"]);if(!i.pass)return o(l("Missing required options: "+i.missing.join(", ")));let u={method:"POST"};"json"==t?(u.body=JSON.stringify(e),u.headers=new Headers({Authorization:"Bearer "+this.options.token,"Content-Type":"application/json",Accept:"application/json, application/x-www-form-urlencoded"})):"form"==t?(u.body=a(e,{arrayFormat:"brackets"}),u.headers=new Headers({Authorization:"Bearer "+this.options.token,"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",Accept:"application/json, application/x-www-form-urlencoded"})):"multipart"==t&&(u.body=s(e),u.headers=new Headers({Authorization:"Bearer "+this.options.token,"Content-Type":void 0,Accept:"application/json, application/x-www-form-urlencoded"})),fetch(this.options.micropubEndpoint,u).then(e=>{if(!e.ok)return o(l("Error with micropub request",e.status));const t=e.headers.get("Location")||e.headers.get("location");if(t)return n(t);const r=e.headers.get("Content-Type");return r&&0===r.indexOf("application/json")?e.json():e.text()}).then(e=>("string"==typeof e&&(e=r(e)),e.error_description?o(l(e.error_description)):e.error?o(l(e.error)):n(e))).catch(e=>o(l("Error sending request",null,e)))})}postMedia(e){return new Promise((t,n)=>{const o=this.checkRequiredOptions(["token","mediaEndpoint"]);if(!o.pass)return n(l("Missing required options: "+o.missing.join(", ")));let r={method:"POST",body:s({file:e}),headers:new Headers({Authorization:"Bearer "+this.options.token,"Content-Type":void 0,Accept:"*/*"})};fetch(this.options.mediaEndpoint,r).then(e=>{if(201!==e.status)return n(l("Error creating media",e.status));const o=e.headers.get("Location")||e.headers.get("location");return o?t(o):n(l("Media endpoint did not return a location",e.status))}).catch(e=>n(l("Error sending request")))})}query(e){return new Promise((t,n)=>{const o=this.checkRequiredOptions(["token","micropubEndpoint"]);if(!o.pass)return n(l("Missing required options: "+o.missing.join(", ")));const r=u(this.options.micropubEndpoint,{q:e}),i={method:"GET",headers:new Headers({Authorization:"Bearer "+this.options.token,"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",Accept:"application/json"})};fetch(r,i).then(t=>t.ok?t.json():n(l("Error getting "+e,t.status))).then(e=>t(e)).catch(t=>n(l("Error getting "+e,null,t)))})}querySource(e,t=[]){return new Promise((n,o)=>{const r=this.checkRequiredOptions(["token","micropubEndpoint"]);if(!r.pass)return o(l("Missing required options: "+r.missing.join(", ")));e=u(this.options.micropubEndpoint,{q:"source",url:e,properties:t});const i={method:"GET",headers:new Headers({Authorization:"Bearer "+this.options.token,"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",Accept:"application/json"})};fetch(e,i).then(e=>e.ok?e.json():o(l("Error getting source",e.status))).then(e=>n(e)).catch(e=>o(l("Error getting source",null,e)))})}}}.call(t,n(15))},function(e,t,n){"use strict";var o=n(14),r=n(13),i=n(4);e.exports={formats:i,parse:r,stringify:o}},function(e,t,n){"use strict";var o=n(5),r=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:o.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(e,t,n){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(o),s=a?o.slice(0,a.index):o,u=[];if(s){if(!n.plainObjects&&r.call(Object.prototype,s)&&!n.allowPrototypes)return;u.push(s)}for(var c=0;null!==(a=i.exec(o))&&c<n.depth;){if(c+=1,!n.plainObjects&&r.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+o.slice(a.index)+"]"),function(e,t,n){for(var o=t,r=e.length-1;r>=0;--r){var i,a=e[r];if("[]"===a)i=(i=[]).concat(o);else{i=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(s,10);!isNaN(u)&&a!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(i=[])[u]=o:i[s]=o}o=i}return o}(u,t,n)}};e.exports=function(e,t){var n=t?o.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||o.isRegExp(n.delimiter)?n.delimiter:i.delimiter,n.depth="number"==typeof n.depth?n.depth:i.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:i.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:i.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:i.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:i.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:i.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:i.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:i.strictNullHandling,""===e||null===e||void 0===e)return n.plainObjects?Object.create(null):{};for(var s="string"==typeof e?function(e,t){for(var n={},o=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,s=o.split(t.delimiter,a),u=0;u<s.length;++u){var c,l,p=s[u],f=p.indexOf("]="),d=-1===f?p.indexOf("="):f+1;-1===d?(c=t.decoder(p,i.decoder),l=t.strictNullHandling?null:""):(c=t.decoder(p.slice(0,d),i.decoder),l=t.decoder(p.slice(d+1),i.decoder)),r.call(n,c)?n[c]=[].concat(n[c]).concat(l):n[c]=l}return n}(e,n):e,u=n.plainObjects?Object.create(null):{},c=Object.keys(s),l=0;l<c.length;++l){var p=c[l],f=a(p,s[p],n);u=o.merge(u,f,n)}return o.compact(u)}},function(e,t,n){"use strict";var o=n(5),r=n(4),i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,serializeDate:function(e){return a.call(e)},skipNulls:!1,strictNullHandling:!1},u=function e(t,n,r,i,a,u,c,l,p,f,d,h){var y=t;if("function"==typeof c)y=c(n,y);else if(y instanceof Date)y=f(y);else if(null===y){if(i)return u&&!h?u(n,s.encoder):n;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||o.isBuffer(y))return u?[d(h?n:u(n,s.encoder))+"="+d(u(y,s.encoder))]:[d(n)+"="+d(String(y))];var b,g=[];if(void 0===y)return g;if(Array.isArray(c))b=c;else{var m=Object.keys(y);b=l?m.sort(l):m}for(var v=0;v<b.length;++v){var _=b[v];a&&null===y[_]||(g=Array.isArray(y)?g.concat(e(y[_],r(n,_),r,i,a,u,c,l,p,f,d,h)):g.concat(e(y[_],n+(p?"."+_:"["+_+"]"),r,i,a,u,c,l,p,f,d,h)))}return g};e.exports=function(e,t){var n=e,a=t?o.assign({},t):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===a.delimiter?s.delimiter:a.delimiter,l="boolean"==typeof a.strictNullHandling?a.strictNullHandling:s.strictNullHandling,p="boolean"==typeof a.skipNulls?a.skipNulls:s.skipNulls,f="boolean"==typeof a.encode?a.encode:s.encode,d="function"==typeof a.encoder?a.encoder:s.encoder,h="function"==typeof a.sort?a.sort:null,y=void 0!==a.allowDots&&a.allowDots,b="function"==typeof a.serializeDate?a.serializeDate:s.serializeDate,g="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:s.encodeValuesOnly;if(void 0===a.format)a.format=r.default;else if(!Object.prototype.hasOwnProperty.call(r.formatters,a.format))throw new TypeError("Unknown format option provided.");var m,v,_=r.formatters[a.format];"function"==typeof a.filter?n=(v=a.filter)("",n):Array.isArray(a.filter)&&(m=v=a.filter);var w,O=[];if("object"!=typeof n||null===n)return"";w=a.arrayFormat in i?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var E=i[w];m||(m=Object.keys(n)),h&&m.sort(h);for(var k=0;k<m.length;++k){var j=m[k];p&&null===n[j]||(O=O.concat(u(n[j],j,E,l,p,f?d:null,v,h,y,b,_,g)))}var S=O.join(c),C=!0===a.addQueryPrefix?"?":"";return S.length>0?C+S:""}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0);var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){return(0,r.h)("footer",{className:"footer"},this.props.domain?(0,r.h)("div",{className:"footer__message"},"Authenticated to ",(0,r.h)("strong",null,this.props.domain)):null,this.props.onSettings?(0,r.h)("button",{className:"button-link",type:"button",onClick:this.props.onSettings},"Settings"):null,this.props.onLogout?(0,r.h)("button",{className:"button-link",type:"button",onClick:this.props.onLogout},"Logout"):null)}}]),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDraft=i,t.saveDraft=a,t.deleteDraft=function(){a({h:"entry",content:"",category:[],"mp-slug":"","mp-syndicate-to":i()["mp-syndicate-to"]})};var o=["h","content","category","mp-slug","mp-syndicate-to"],r={h:"entry",content:"",category:[],"mp-slug":"","mp-syndicate-to":[]};function i(){var e=JSON.parse(localStorage.getItem("draft"));return e||r}function a(e){var t={};o.forEach(function(n){t[n]=e[n]}),localStorage.setItem("draft",JSON.stringify(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSettings=function(){var e=JSON.parse(localStorage.getItem("settings"));if(e)return e;return s},t.saveSettings=function(e){var t={};a.forEach(function(n){t[n]=e[n]}),localStorage.setItem("settings",JSON.stringify(t))},t.saveAuthenticationDetails=function(e,t,n){e&&(localStorage.setItem("domain",e),i.default.options.me=e);t&&(localStorage.setItem("token",t),i.default.options.token=t);n&&(localStorage.setItem("micropubEndpoint",n),i.default.options.micropubEndpoint=n)};var o,r=n(3),i=(o=r)&&o.__esModule?o:{default:o};var a=["defaultToCurrentPage","autoSlug","closeAfterPosting","reacji","slug","syndicateTo"],s={defaultToCurrentPage:!1,autoSlug:!1,closeAfterPosting:!0,reacji:n(2).DEFAULT_REACJI,slug:"mp-slug",syndicateTo:"mp-syndicate-to"}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),i=l(n(24)),a=l(n(28)),s=l(n(6)),u=l(n(34)),c=n(1);function l(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setDefaultView=function(){n.isAuthenticated()?(n.setState({currentView:"new-note"}),n.getPageUrl()):n.setState({currentView:"login"})},n.displayMessage=function(e,t,o){n.setState({currentView:"feedback",message:e,postLocation:"string"==typeof o?o:null})},n.handleSettings=function(){n.setState({currentView:"settings"})},n.handleLogout=function(){(0,c.logout)(),n.setState({currentView:"login"})},n.state={pageUrl:""},n.setDefaultView(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){switch(this.state.currentView){case"login":return(0,r.h)(i.default,{handleSettings:this.handleSettings});case"feedback":return(0,r.h)(s.default,{location:this.state.postLocation},this.state.message);case"settings":return(0,r.h)(u.default,{onClose:this.setDefaultView});default:return(0,r.h)(a.default,{handleLogout:this.handleLogout,handleSettings:this.handleSettings,userFeedback:this.displayMessage,pageUrl:this.state.pageUrl})}}},{key:"isAuthenticated",value:function(){return!!localStorage.getItem("token")&&!!localStorage.getItem("micropubEndpoint")}},{key:"getPageUrl",value:function(){var e=this;(0,c.getPageUrl)().then(function(t){e.setState({pageUrl:t})})}}]),t}();t.default=p},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),i=c(n(6)),a=c(n(17)),s=n(1),u=c(n(3));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,n,o;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleChange=function(e){o.setState({domain:e.target.value,hasErrors:!1})},o.handleSubmit=function(e){e.preventDefault();var t=o.getNormalizedDomain();o.setState({isLoading:!0,domain:t}),u.default.options.me=t,u.default.getAuthUrl().then(function(e){chrome.runtime.sendMessage({action:"begin-auth",payload:{authUrl:e,domain:o.state.domain,metadata:{authEndpoint:u.default.options.authEndpoint,tokenEndpoint:u.default.options.tokenEndpoint,micropub:u.default.options.micropubEndpoint}}})}).catch(function(e){return console.log(e.message),o.setState({hasErrors:!0,errorMessage:"Missing micropub data on "+o.state.domain+". Please ensure the following links are present: authorization_endpoint, token_endpoint, micropub",isLoading:!1})})},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.input.focus()},150)}},{key:"render",value:function(){var e=this;return(0,r.h)("div",null,(0,r.h)("form",{class:"container",method:"GET",onSubmit:this.handleSubmit},(0,r.h)("p",null,"To use Omnibear, sign in with your domain. Your website will need to support"," ",(0,r.h)("a",{href:"http://indieweb.org/micropub",onClick:s.openLink},"Micropub")," ","for creating new posts."),(0,r.h)("div",{class:"fields-inline"},(0,r.h)("input",{type:"text",name:"me",placeholder:"https://example.com",className:"fields-inline__fill",value:this.state.domain,onInput:this.handleChange,disabled:this.state.isLoading,ref:function(t){return e.input=t}}),(0,r.h)("button",{type:"submit",disabled:this.state.isLoading,className:this.state.isLoading?"button is-loading":"button"},"Sign in")),this.state.hasErrors?(0,r.h)(i.default,{type:"error"},this.state.errorMessage||"Error"):null),(0,r.h)(a.default,{onSettings:this.props.handleSettings}))}},{key:"getNormalizedDomain",value:function(){return this.state.domain.startsWith("http://")||this.state.domain.startsWith("https://")?this.state.domain:"http://"+this.state.domain}},{key:"getFields",value:function(e){return["redirect_uri=https://omnibear.com/auth/success/","client_id=https://omnibear.com","response_type=code","scope=create","me="+e].join("&")}}]),t}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0);function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(){var e,n,o;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleClick=function(e){e.preventDefault(),o.props.onClick()},i(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){return(0,r.h)("button",{className:this.getClass(),disabled:this.props.isDisabled,onClick:this.handleClick},this.props.children)}},{key:"getClass",value:function(){return this.props.isActive?"tab is-active":"tab"}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(0),a=n(25),s=(o=a)&&o.__esModule?o:{default:o},u=n(2);var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"render",value:function(){this.props.postType;return(0,i.h)("div",{className:"tabs"},this.renderNewNote(),this.renderPageReply(),this.renderItemReply())}},{key:"renderNewNote",value:function(){return(0,i.h)(s.default,{isActive:this.props.postType===u.NEW_NOTE,onClick:this.switchTo(u.NEW_NOTE)},"New note")}},{key:"renderPageReply",value:function(){return(0,i.h)(s.default,{isActive:this.props.postType===u.PAGE_REPLY,onClick:this.switchTo(u.PAGE_REPLY)},"Current page")}},{key:"renderItemReply",value:function(){return(0,i.h)(s.default,{isActive:this.props.postType===u.ITEM_REPLY,isDisabled:!this.props.hasSelectedEntry,onClick:this.switchTo(u.ITEM_REPLY)},"Selected entry")}},{key:"switchTo",value:function(e){var t=this;return function(){t.props.onChange(e)}}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(0),a=n(30),s=(o=a)&&o.__esModule?o:{default:o},u=n(18),c=n(1),l=n(2);var p=function(e){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus=function(){n.content.focus()},n.updateSlug=function(e){var t=e.target.value.trim(),o=(0,c.clone)(n.props.entry);o["mp-slug"]=t,n.props.updateEntry(o),n.setState({isSlugEdited:""!==t})},n.updateContent=function(e){var t=e.target.value,o=(0,c.clone)(n.props.entry);o.content=t,n.shouldAutoSlug()&&(o["mp-slug"]=(0,c.generateSlug)(t)),n.props.updateEntry(o)},n.updateSyndicateTo=function(e){var t=(0,c.clone)(n.props.entry);t["mp-syndicate-to"]=e,n.props.updateEntry(t)},n.onSubmit=function(e){e.preventDefault(),n.props.onSubmit(n.props.entry)},n.state={isSlugEdited:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){setTimeout(this.focus,150)}},{key:"componentDidUpdate",value:function(){(0,u.saveDraft)(this.props.entry)}},{key:"render",value:function(){var e=this,t=this.props,n=t.postType,o=t.entry,r=t.syndicateOptions,a=t.isDisabled,u=t.isLoading;return(0,i.h)("form",{onSubmit:this.onSubmit},(0,i.h)("div",null,(0,i.h)("label",{for:"input-content"},n===l.NEW_NOTE?"Content":"Reply"),(0,i.h)("textarea",{id:"input-content",value:o.content,onInput:this.updateContent,onBlur:this.updateContent,rows:"4",disabled:a,ref:function(t){e.content=t}}),(0,i.h)("div",{class:"input-extra"},o.content.length)),(0,i.h)("div",null,(0,i.h)("label",{for:"input-category"},"Tags (space separated)"),(0,i.h)("input",{id:"input-category",type:"text",placeholder:"e.g. web  personal",value:o.category.join(" "),onChange:this.updateFieldArray("category"),disabled:a})),(0,i.h)("div",null,(0,i.h)("label",{for:"input-slug"},"Slug"),(0,i.h)("input",{id:"input-slug",type:"text",name:"mp-slug",value:o["mp-slug"],onInput:this.updateSlug,disabled:a})),(0,i.h)(s.default,{options:r,selected:o["mp-syndicate-to"],onUpdate:this.updateSyndicateTo,isDisabled:a}),(0,i.h)("button",{type:"submit",disabled:a||!o.content,className:u?"button is-loading":"button"},"Post"))}},{key:"updateFieldArray",value:function(e){var t=this;return function(n){n.preventDefault();var o=(0,c.clone)(t.props.entry);o[e]=n.target.value.trim().split(" "),t.props.updateEntry(o)}}},{key:"shouldAutoSlug",value:function(){return!this.state.isSlugEdited&&!(!this.props.settings||!this.props.settings.autoSlug)}}]),t}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),i=y(n(29)),a=y(n(6)),s=y(n(26)),u=y(n(27)),c=y(n(17)),l=n(18),p=n(1),f=y(n(3)),d=n(2),h=n(19);function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.handleLike=function(){var e=n.getCurrentUrl();e&&n.postEntry({h:"entry","like-of":e}).then(function(e){var t=n.state.postType===d.ITEM_REPLY?"Item":"Page";n.flashSuccessMessage(t+" liked successfully",e)}).catch(function(e){console.error(e),n.flashErrorMessage("Error posting like")})},n.handleRepost=function(){var e=n.getCurrentUrl();e&&n.postEntry({h:"entry","repost-of":e}).then(function(e){var t=n.state.postType===d.ITEM_REPLY?"Item":"Page";n.flashSuccessMessage(t+" reposted successfully",e)}).catch(function(e){console.error(e),n.flashErrorMessage("Error reposting")})},n.handleReacji=function(e){var t=n.getCurrentUrl();t&&n.postEntry({h:"entry",content:e,"in-reply-to":t}).then(function(e){var t=n.state.postType===d.ITEM_REPLY?"Item":"Page";n.flashSuccessMessage(t+" reacted to successfully",e)}).catch(function(e){console.error(e),n.flashErrorMessage("Error reacting")})},n.updateEntry=function(e){n.setState({entry:e})},n.handleSubmit=function(e){n.state.postType!==d.NEW_NOTE&&(e["in-reply-to"]=n.state.url),n.postEntry(e).then(function(e){var t=n.state.postType===d.NEW_NOTE?"Note":"Reply";(0,l.deleteDraft)(),n.flashSuccessMessage(t+" posted successfully",e)}).catch(function(e){console.error(e),e.status>=400&&e.status<500?n.flashErrorMessage("Error authenticating to micropub endpoint. Try logging out and back in."):n.flashErrorMessage("Error posting Note")})},n.changeView=function(e){var t=void 0;switch(e){case d.NEW_NOTE:t=null;break;case d.PAGE_REPLY:t=localStorage.getItem("pageUrl");break;case d.ITEM_REPLY:t=localStorage.getItem("selectedEntry")}n.setState({url:t,postType:e}),n.form.focus()};var o=localStorage.getItem("selectedEntry"),r=JSON.parse(localStorage.getItem("syndicateTo")),i=(0,h.getSettings)(),a=(0,l.getDraft)();return n.state={postType:n.getPostType(i),selectedEntry:localStorage.getItem("selectedEntry"),userDomain:localStorage.getItem("domain"),entry:a,hasSelectedEntry:!!o,isDisabled:!1,isLoading:!1,settings:i,syndicateOptions:r},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"getPostType",value:function(e){var t=localStorage.getItem("selectedEntry");return-1!==location.search.indexOf("reply=true")||e.defaultToCurrentPage?t?d.ITEM_REPLY:d.PAGE_REPLY:d.NEW_NOTE}},{key:"getCurrentUrl",value:function(){switch(this.state.postType){case d.NEW_NOTE:return null;case d.PAGE_REPLY:return this.props.pageUrl;case d.ITEM_REPLY:return this.state.selectedEntry}}},{key:"render",value:function(){var e=this,t=this.state,n=t.postType,o=t.isDisabled,l=t.isLoading,p=t.settings,f=t.userDomain,h=t.entry,y=t.syndicateOptions,b=t.hasSelectedEntry,g=t.errorMessage,m=this.props,v=m.handleSettings,_=m.handleLogout;return(0,r.h)("div",null,(0,r.h)(s.default,{postType:n,onChange:this.changeView,hasSelectedEntry:b}),(0,r.h)(i.default,{postType:n,url:this.getCurrentUrl(),onLike:this.handleLike,onRepost:this.handleRepost,onReacji:this.handleReacji,isDisabled:l,settings:p}),(0,r.h)("div",{className:"container"},(0,r.h)(u.default,{postType:n,entry:h,settings:p,syndicateOptions:y,updateEntry:this.updateEntry,onSubmit:this.handleSubmit,isDisabled:o,isLoading:l,ref:function(t){return e.form=t}}),g?(0,r.h)(a.default,{type:d.MESSAGE_ERROR},g):null),(0,r.h)(c.default,{domain:f,onSettings:v,onLogout:_}))}},{key:"flashSuccessMessage",value:function(e,t){this.props.userFeedback(e,d.MESSAGE_SUCCESS,t),this.state.settings.closeAfterPosting&&setTimeout(function(){window.close()},3e3)}},{key:"flashErrorMessage",value:function(e){var t=this;this.setState({errorMessage:e,isDisabled:!1,isLoading:!1}),setTimeout(function(){t.state.errorMessage===e&&t.setState({errorMessage:!1})},4e3)}},{key:"postEntry",value:function(e){this.setState({isDisabled:!0,isLoading:!0});var t=(0,p.clone)(e),n=this.state.settings.slug,o=this.state.settings.syndicateTo;return n&&"mp-slug"!==n&&(t[n]=t["mp-slug"],delete t["mp-slug"]),o&&"mp-syndicate-to"!==o&&(t[o]=t["mp-syndicate-to"],delete t["mp-syndicate-to"]),f.default.create(t,"form")}}]),t}();t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),i=n(2),a=u(n(35)),s=u(n(36));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var e,n,o;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=o=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.renderReacji=function(e,t){return(0,r.h)("li",{key:e},(0,r.h)("button",{onClick:function(){return o.props.onReacji(e)},disabled:o.props.isDisabled},e))},c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){return this.props.postType!==i.NEW_NOTE&&this.props.url?(0,r.h)("div",null,(0,r.h)("div",{className:"info-banner"},this.props.url),(0,r.h)("div",{className:"container"},(0,r.h)("h2",{className:"minor-heading"},"Quick Actions"),this.renderQuickActions())):null}},{key:"renderQuickActions",value:function(){var e=this.props.settings,t=void 0;return t=e&&e.reacji?e.reacji:i.DEFAULT_REACJI,(0,r.h)("ul",{className:"quick-actions"},(0,r.h)("li",null,(0,r.h)("button",{onClick:this.props.onRepost,disabled:this.props.isDisabled},(0,r.h)(s.default,null)," repost")),(0,r.h)("li",null,(0,r.h)("button",{onClick:this.props.onLike,disabled:this.props.isDisabled},(0,r.h)(a.default,null)," like")),t.map(this.renderReacji))}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0);function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(){var e,n,o;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o.renderOption=function(e){var t=o.props,n=t.selected,i=t.isDisabled,a=!!n&&n.indexOf(e.uid)>-1;return(0,r.h)("label",null,(0,r.h)("input",{type:"checkbox",checked:a,disabled:i,onClick:o.toggleOption(e.uid)}),e.name)},i(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){var e=this.props.options;return e&&e.length?(0,r.h)("div",null,(0,r.h)("div",{class:"label"},"Syndicate to"),e.map(this.renderOption)):null}},{key:"toggleOption",value:function(e){var t=this;return function(n){var o=t.props.selected||[];if(n.target.checked)o.push(e),t.props.onUpdate(o);else{var r=o.indexOf(e);o.splice(r,1),t.props.onUpdate(o)}}}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0);var i=function(e){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showAuthenticationDetails=function(){n.setState({showFields:!0})},n.state={showFields:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){return(0,r.h)("fieldset",null,(0,r.h)("legend",null,"Authentication details (advanced)"),(0,r.h)("div",{class:"settings-form__description"},"These values are set automatically upon logging in. Only edit them if you are having trouble authenticating and wish to do so manually."),this.state.showFields?[(0,r.h)("div",null,(0,r.h)("label",{htmlFor:"me"},"Me (domain name)"),(0,r.h)("input",{id:"me",type:"text",value:this.props.me,onChange:this.update("me"),placeholder:"https://example.com"})),(0,r.h)("div",null,(0,r.h)("label",{htmlFor:"mp-endpoint"},"Micropub endpoint"),(0,r.h)("input",{id:"mp-endpoint",type:"text",value:this.props.micropubEndpoint,onChange:this.update("micropubEndpoint"),placeholder:"https://example.com/micropub"})),(0,r.h)("div",null,(0,r.h)("label",{htmlFor:"token"},"Token"),(0,r.h)("input",{id:"token",type:"text",value:this.props.token,onChange:this.update("token")}))]:(0,r.h)("div",{class:"text-right"},(0,r.h)("button",{type:"button",onClick:this.showAuthenticationDetails},"Show")))}},{key:"update",value:function(e){var t=this;return function(n){t.props.onChange(e)(n.target.value)}}}]),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0);var i=function(e){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showAuthenticationDetails=function(){n.setState({showFields:!0})},n.state={showFields:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.slug,n=e.syndicateTo;return(0,r.h)("fieldset",null,(0,r.h)("legend",null,"Customize endpoint fields"),(0,r.h)("div",{class:"settings-form__description"},"If your micropub server expects custom or legacy fieldnames, you can specify those here"),this.state.showFields?[(0,r.h)("div",null,(0,r.h)("label",{htmlFor:"slug"},"Slug"),(0,r.h)("input",{id:"slug",type:"text",value:t,onChange:this.update("slug")}),(0,r.h)("div",{class:"settings-form__description"},"Choose the name of the field that the slug will be sent in. This should be ",(0,r.h)("code",null,"mp-slug")," for up-to-date endpoints.")),(0,r.h)("div",null,(0,r.h)("label",{htmlFor:"syndicate-to"},"Syndicate To"),(0,r.h)("input",{id:"syndicate-to",type:"text",value:n,onChange:this.update("syndicateTo")}),(0,r.h)("div",{class:"settings-form__description"},"Choose the name of the field that the syndicate-to UIDs will be sent in. This should be ",(0,r.h)("code",null,"mp-syndicate-to")," for up-to-date endpoints."))]:(0,r.h)("div",{class:"text-right"},(0,r.h)("button",{type:"button",onClick:this.showAuthenticationDetails},"Show")))}},{key:"update",value:function(e){var t=this;return function(n){t.props.onChange(e)(n.target.value)}}}]),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0);var i=function(e){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderReacji=function(e,t){return(0,r.h)("div",{className:"reacji-tag",key:e},e,(0,r.h)("button",{type:"button",onClick:n.deleteReacji(t)},"Ã—"))},n.update=function(e){n.setState({value:e.target.value})},n.addReacji=function(){var e=n.state.value,t=n.props.reacji;e&&-1===t.indexOf(e)&&(t.push(e),n.props.onChange(t),n.setState({value:""}))},n.setState({value:""}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){var e=this.props.reacji;return(0,r.h)("div",null,(0,r.h)("label",null,"Quick replies (â€œReacjiâ€)"),(0,r.h)("div",{className:"reacji-row"},e.map(this.renderReacji)),(0,r.h)("div",{class:"input-inline"},(0,r.h)("input",{type:"text",value:this.state.value,onChange:this.update}),(0,r.h)("button",{type:"button",onClick:this.addReacji},"Add")))}},{key:"deleteReacji",value:function(e){var t=this;return function(){var n=t.props.reacji;n.splice(e,1),t.props.onChange(n)}}}]),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),i=c(n(33)),a=c(n(32)),s=c(n(31)),u=(n(2),n(19));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.set=function(e){return function(t){n.setState(l({},e,t))}},n.save=function(e){e.preventDefault();var t=n.state,o=t.me,r=t.token,i=t.micropubEndpoint;(0,u.saveSettings)(n.state),(0,u.saveAuthenticationDetails)(o,r,i),n.props.onClose()};var o=(0,u.getSettings)();return o.me=localStorage.getItem("domain"),o.micropubEndpoint=localStorage.getItem("micropubEndpoint"),o.token=localStorage.getItem("token"),o.showAuthenticationDetails=!1,n.setState(o),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){var e=this.state,t=e.defaultToCurrentPage,n=e.autoSlug,o=e.closeAfterPosting,u=e.reacji,c=e.slug,l=e.syndicateTo,p=e.me,f=e.micropubEndpoint,d=e.token;e.showAuthenticationDetails;return(0,r.h)("div",null,(0,r.h)("h1",{class:"section-heading"},"Settings"),(0,r.h)("div",{class:"container"},(0,r.h)("form",{class:"settings-form",onSubmit:this.save},(0,r.h)("label",null,(0,r.h)("input",{type:"checkbox",checked:t,onChange:this.updateBoolean("defaultToCurrentPage")}),"Always open in â€œReply to current pageâ€ mode"),(0,r.h)("label",null,(0,r.h)("input",{type:"checkbox",checked:n,onChange:this.updateBoolean("autoSlug")}),"Automatically generate slug from post content"),(0,r.h)("label",null,(0,r.h)("input",{type:"checkbox",checked:o,onChange:this.updateBoolean("closeAfterPosting")}),"Close Omnibear window after posting"),(0,r.h)(i.default,{reacji:u,onChange:this.set("reacji")}),(0,r.h)(a.default,{slug:c,syndicateTo:l,onChange:this.set}),(0,r.h)(s.default,{me:p,micropubEndpoint:f,token:d,onChange:this.set}),(0,r.h)("div",{class:"form-buttons"},(0,r.h)("button",{type:"submit",className:"button"},"Save"),(0,r.h)("button",{type:"button",className:"button-link",onClick:this.props.onClose},"Cancel")))))}},{key:"update",value:function(e){var t=this;return function(n){t.set(e)(n.target.value)}}},{key:"updateBoolean",value:function(e){var t=this;return function(n){t.setState(l({},e,n.target.checked))}}}]),t}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0);var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){return(0,r.h)("svg",{className:"svg-heart",viewBox:"-5 0 110 125"},(0,r.h)("desc",null,"heart"),(0,r.h)("path",{d:"M49.99,96.266c4.246-2.908,50.016-34.809,50.016-63.154c0-17.711-10.822-29.378-26.424-29.378  c-14.357,0-22.389,13.18-23.582,15.29c-1.194-2.109-9.225-15.29-23.582-15.29c-15.603,0-26.425,11.667-26.425,29.378  c0,28.345,45.724,60.246,49.97,63.154H49.99z",fill:"transparent",stroke:"var(--red)","stroke-width":"10"}))}}]),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0);var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){return(0,r.h)("svg",{className:"svg-repost",viewBox:"390 45 396 225"},(0,r.h)("path",{d:" M 570 220 L 490 220 L 490 160 L 520 160 C 530.71 160 540 151.53 540 140 C 540 132.5 536.09 127.66 530 120 L 490 71.88 C 483.90999999999997 64.69 478.13 60 470 60 C 461.87 60 456.09000000000003 64.69 450 71.88 L 410 120 C 403.91 127.66 400 132.5 400 140 C 400 151.53 409.29 160 420 160 L 450 160 L 450 240 C 450 251.04 458.96 260 470 260 L 570 260 C 581.04 260 590 251.04 590 240 C 590 228.96 581.04 220 570 220 Z  M 760 160 L 730 160 L 730 80 C 730 68.96 721.04 60 710 60 L 610 60 C 598.96 60 590 68.96 590 80 C 590 91.03999999999999 598.96 100 610 100 L 690 100 L 690 160 L 660 160 C 649.29 160 640 168.47000000000003 640 180 C 640 187.5 643.91 192.34000000000003 650 200 L 690 248.13 C 696.09 255.31 701.88 260 710 260 C 718.12 260 723.91 255.31 730 248.12 L 770 200 C 776.09 192.34000000000003 780 187.5 780 180 C 780 168.47000000000003 770.71 160 760 160 Z ",fill:"transparent",stroke:"var(--green)","stroke-width":"20"}))}}]),t}();t.default=i},function(e,t,n){"use strict";var o,r=n(0),i=n(21),a=(o=i)&&o.__esModule?o:{default:o};document.addEventListener("DOMContentLoaded",function(){(0,r.render)((0,r.h)(a.default,null),document.body)})}]);